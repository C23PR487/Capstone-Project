git clone https://github.com/C23PR487/Capstone-Project.git

npm install @hapi/hapi
npm install nanoid@3.x.x
npm install mysql

#build image
gcloud builds submit \
  --tag gcr.io/$GOOGLE_CLOUD_PROJECT/hapi-server

#deploy hapi backend
gcloud run deploy hapi-server \
  --image gcr.io/$GOOGLE_CLOUD_PROJECT/hapi-server \
  --platform managed \
  --region asia-southeast2 \
  --memory=2Gi \
  --allow-unauthenticated \
  --max-instances=1

SERVICE_URL=$(gcloud beta run services describe hapi-server --platform managed --region asia-southeast2 --format="value(status.url)")

echo $SERVICE_URL

curl -X GET $SERVICE_URL